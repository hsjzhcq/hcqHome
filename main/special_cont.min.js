(()=>{if(null!=$("body").attr("add"))return alert("è¯·ä¸è¦é‡å¤åŠ è½½è„šæœ¬");$("head").eq(0).append("<style>"+getStyle()+"</style>"),$("body").attr("add","").append(getHtml());var $main=$("#hcq-main"),$c_left=$("#hcq-content-left"),$c_right=$("#hcq-content-right"),$sw_box=$(".switch-box"),$l_btn=$(".left-btn"),$r_btn=$(".right-btn"),$s_btn=$(".switch-platform"),$supportBox=$(supportBox),$changeBg=$(changeBg),$consoleInfo=$("#console-info>.info-box"),$speedSet=$c_right.find("input[type=text]"),$couresMenu=$(".coures-menu"),$couresWrap=$couresMenu.children(".coures-wrap"),$couresSwitch=$couresMenu.children("#coures_switch"),$couresView=$(".coures-view"),$menubar=$("#menubar"),$v_btn=$menubar.children("[data-type=view]"),$jumpDom=$menubar.children("[data-type=jump-dom]"),$jumpVideo=$menubar.children("[data-type=jump-video]"),$jumpThis=$menubar.children("[data-type=jump-this]"),$ch_btn=$menubar.children("[data-type=change]"),$c_btn=$menubar.children("[data-type=changeBg]"),$countDown=$couresMenu.find("time"),$run=$(".mian-run");$sw_box.find("li[data-type='2']").attr("on","on");let bgUrl=localStorage.getItem("s_bg"),inTime=(bgUrl&&$main.css("background-image","url("+bgUrl+")"),null);var config={index:[0,0,0],nowDomOrVideo:0,unIndex:0,isRead:!1,isInit:!1,close:!1,timeOut:null,speed:3e3,ajaxSpeed:2e3,isPause:!1,errorNum:0,pauseNode:null,domRequestSpeed:2e3,videoRequestSpeed:5e3,videoAddSpeed:15,Jump:0,_Lock:!0,isLoadFinish:!1},maxItemView=300,finishList=[],CourseList=null,unNodeList=[];const AUTHORIZATION=$.cookie("authorization");setTimeOut(async()=>{userInit(),Console("æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ä¸­ã€‚ã€‚ã€‚è¯·ç¨å");var e,t,o=await _ajax("/project/personal/basicinfo");null==o||-1==o.code?(alert("è¯·ç™»å½•åå†æ‰§è¡Œè¯¥è„šæœ¬ï¼"),setTimeout(()=>{location.reload()},5e3)):(e=o.user.DisplayName,t=o.user.UserName,$c_left.children("img").attr("src",o.avatorUrl+"?x-oss-process=image/resize,m_fixed,w_110,h_110,limit_0"),$c_left.find(".user-name").text(e),$c_left.find(".stuNum").text(t),Console(`[${e}]ç”¨æˆ·æ‚¨å¥½ï¼Œæ¬¢è¿â”(*ï½€âˆ€Â´*)ãƒäº»!ä½¿ç”¨æœ¬è„šæœ¬ï¼Œè¯¥è„šæœ¬ä¸ºèŒæ•™äº‘èµ„æºåº“ç‰¹ä¾›ç‰ˆ`),Console("åˆ¶ä½œä¸æ˜“,æ‚¨çš„æ”¯æŒæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›!"),config._Lock=!1)});class _script{constructor(){this.url={},this.init()}init(){this.url.login="/portal_new/portal/portal.html",this.url.courseLists="/studycenter/MyCourse/studingCourse",this.url.moduleLists="/study/Directory/directoryList",this.url.nodeLists="/study/directory/directory",this.url.childNodeInfo="/study/directory/view",this.url.setProgress="/study/directory/updateStatus"}async getCourseLists(){let e=(await _ajax(this.url.courseLists,{userid:localStorage.getItem("userId"),pageSize:60})).list;return{len:e.length,list:e.filter(e=>{var t=100*+e.schedule!=100;return t||finishList.push(o(e)),t}).map(e=>o(e))};function o(e){return{id:e.id,name:e.title,cover:e.cover,progress:+e.schedule,module:[]}}}async getModuleLists(){var e=config.index[0];let t=(await _ajax(this.url.moduleLists,{courseId:CourseList[e].id})).directory,i=0;e=t.map((e,t)=>{var o=e.section||{};return i++,{index:t,id:o.Id,name:o.Title,load:!1,topic:e.chapters||[]}});return{info:{len:i,unlen:e.length},module:e}}async getNodeLists(){var e=config.index[0],t=config.index[1];let o=CourseList[e].module[t].topic;return o.map((e,t)=>{var o=e.chapter.ChapterType;return{index:t,type:o,id:2===o?e.chapter.ResId:e.chapter.Id,name:e.chapter.Title,Nodes:{knowleges:e.knowleges||[],cells:e.cells||[]}}})}async getChildNodeLists(){let e=config.index[0],t=config.index[1],o=config.index[2];var i=CourseList[e].module[t].topic[o];if(2===i.type)return{unNode:[`${t}-${o}-0`],data:[{type:"work",id:i.id,name:i.name,unNum:`${t}-${o}-0`}]};let n=i.Nodes,s=[],r=[],a=null,c=0;function l(e){1!==e.Status&&(a=`${t}-${o}-`+c++,r.push(a),s.push({type:e.CellType,id:e.Id,name:e.Title,unNum:a}))}return n.cells.forEach(e=>l(e)),n.knowleges.forEach(e=>{e.cells.forEach(e=>l(e))}),{unNode:r,data:s}}async getChildNodeInfo(e){if("object"!=typeof e)return Promise.reject("å‚æ•°ä¸ä¸ºå¯¹è±¡");var t=config.index[0],t={courseId:CourseList[t].id,cellId:e.id,enterType:"study"};return _ajax(this.url.childNodeInfo,t)}}var $Script=new _script;async function getCourseLists(){try{if(config.isRead&&0!=CourseList.length){var t=await $Script.getCourseLists();let e=[];e:for(const o of t.list){for(const i of CourseList)if(i.id==o.id){i.progress=+o.progress;continue e}e.push(o)}t.list.length!=CourseList.length&&(Console("è¯¾ç¨‹æœ‰å˜åŠ¨ï¼Œé‡æ–°æ›´æ–°è¯¾ç¨‹ã€‚ã€‚ã€‚"),CourseList.push(...e)),updataData()}if(config.pauseNode="getCourseLists",0!=CourseList.length)config.isInit?setTimeOut(getModuleLists):CourseListInit();else{Console("æ­£åœ¨è·å–è¯¾ç¨‹åˆ—è¡¨ä¸­...");let t=await $Script.getCourseLists();if(CourseList=t.list,updataData(),0==CourseList.length)return setTimeOut(Console("æ‰€æœ‰è¯¾ç¨‹å‡å®Œæˆï¼Œæ„Ÿè°¢æ‚¨çš„ä½¿ç”¨ğŸ˜‰")),void setTimeout(()=>{location.reload()},3500);config.errorNum=0,await setTimeOut(()=>{var e=CourseList.length;Console(`å…¶ä¸­å·²å®Œæˆè¯¾ç¨‹æœ‰${t.len-e}é—¨è¯¾ç¨‹ï¼Œæœªå®Œæˆè¯¾ç¨‹ä¸º${e}é—¨è¯¾ç¨‹`),t=null}),CourseListInit()}}catch(e){setError(e)}}async function CourseListInit(){await setTimeOut(()=>{Console("æ­£åœ¨è½½å…¥æœªå®Œæˆè¯¾ç¨‹,è¯·ç¨åã€‚ã€‚ã€‚"),$couresWrap.html(getCourseDom(CourseList)),config.isInit=!0,config.isRead=!1}).then(e=>{setTimeOut(()=>{$menubar.children("[data-type=change]").removeClass("loader"),$ch_btn.is(".onck")||$ch_btn.click(),index=15,inTime=setInterval(()=>{index<=0?(clearInterval(inTime),$ch_btn.is(".onck")&&$ch_btn.click(),$countDown.parent().remove(),getModuleLists()):$countDown.text(--index)},1e3)})})}async function getModuleLists(){var o=config.index[0];try{if(config.pauseNode="getModuleLists",Console("å½“å‰è¯¾ç¨‹åç§°"+CourseList[o].name),0==CourseList[o].module.length){var i=await $Script.getModuleLists();CourseList[o].module=i.module,updataData();let e=i.info.len,t=i.info.unlen;await setTimeOut(()=>{Console(`æˆåŠŸè·å–åˆ°è¯¾ç¨‹æ¨¡å—ä¿¡æ¯ï¼Œæœ¬è¯¾ç¨‹æœ‰${e}ä¸ªæ¨¡å—`)}).then(setTimeOut(()=>{Console(`å…¶ä¸­å·²å®Œæˆ${e-t}ä¸ªæ¨¡å—ï¼Œæœªå®Œæˆ${t}ä¸ªæ¨¡å—`)}))}else Console("åŠ è½½è¯¾ç¨‹å­˜æ¡£æ¨¡å—ä¿¡æ¯ä¸­...");setTimeOut(()=>{config.errorNum=0,config.close||getNodeLists()})}catch(e){setError(e)}}async function getNodeLists(){var e=config.index[0],t=config.index[1];try{config.pauseNode="getNodeLists",Console("æ­£åœ¨å¯¹æœ¬è¯¾ç¨‹æ¨¡å—èŠ‚ç‚¹ä¿¡æ¯è¿›è¡Œè§£æ...");for(var o,i=window.performance.now(),n=CourseList[e].module.length;t<n&&!config.close;)!1===CourseList[e].module[t].load&&(o=await $Script.getNodeLists(),CourseList[e].module[t].topic=o,CourseList[e].module[t].load=!0),config.index[1]=++t;if(updataData(),Console(`<æ¨¡å—[èŠ‚ç‚¹]ä¿¡æ¯>è§£æå…±è€—æ—¶: ${(window.performance.now()-i).toFixed(2)} ms`),config.close)return;configInit(1),setTimeOut(()=>{Console("å·²è·å–æœ¬è¯¾ç¨‹æ‰€æœ‰æ¨¡å—èŠ‚ç‚¹ä¿¡æ¯"),getChildNodeLists()})}catch(e){setError(e)}}async function getChildNodeLists(){var t=config.index[0],o=config.index[1],i=config.index[2];try{config.pauseNode="getChildNodeLists",Console("æ­£åœ¨å¯¹æ¨¡å—å­èŠ‚ç‚¹ä¿¡æ¯è¿›è¡Œè§£æ...");for(var e=window.performance.now(),n=CourseList[t].module.length;o<n&&!config.close;){for(var s=CourseList[t].module[o].topic.length;i<s;){let e=CourseList[t].module[o].topic[i].Nodes;if(null!=e&&"Object"==getType(e)){var r=await $Script.getChildNodeLists();if(config.close)break;CourseList[t].module[o].topic[i].Nodes=0==r.data.length?null:r.data,unNodeList.push(...r.unNode)}else null!=e&&e.forEach(e=>{e.unNum&&unNodeList.push(e.unNum)});config.index[2]=++i}config.index[1]=++o,config.index[2]=i=0}if(updataData(),Console(`<æ¨¡å—[å­èŠ‚ç‚¹]ä¿¡æ¯>è§£æå…±è€—æ—¶: ${(window.performance.now()-e).toFixed(2)} ms`),config.close)return;Console("å·²è·å–æœ¬è¯¾ç¨‹æ‰€æœ‰æ¨¡å—å­èŠ‚ç‚¹ä¿¡æ¯"),setTimeOut(()=>{Console(`å…¶ä¸­ç»è¿‡æ•°æ®ç­›é€‰å¯å¾—,æœªå®Œæˆå°èŠ‚å…±è®¡${unNodeList.length}ä¸ª`),configInit(2)}).then(e=>setTimeOut(()=>{Console("è¯»å–æ•°æ®å¼€å§‹æ„å»ºè¯¾ç¨‹è§†å›¾"),$couresView.html(getViewDom())})).then(e=>setTimeOut(()=>{Console("è¯¾ç¨‹è§†å›¾æ„å»ºå®Œæ¯•,æ­£åœ¨è¯»å–æœªå®Œæˆå­èŠ‚ç‚¹..."),$menubar.children("[data-type=view]").removeClass("loader")})).then(e=>{getChildNodeInfo(),$jumpDom.removeClass("loader"),$jumpVideo.removeClass("loader")})}catch(e){setError(e)}}function getType(e){return Object.prototype.toString.call(e).slice(8,-1)}async function getChildNodeInfo(){try{for(config.pauseNode="getChildNodeInfo";0!=unNodeList&&!config.close;){let n=unNodeList[config.unIndex];var s=n.split("-"),r=(Console(`å½“å‰å­èŠ‚ç‚¹ä¿¡æ¯ä¸º${+s[0]+1}-${+s[1]+1}-${+s[2]+1}èŠ‚ç‚¹`),CourseList[config.index[0]].module[s[0]].topic[s[1]].Nodes[s[2]]);let e=!1,t="";var a,o=/video/.test(r.type);switch(config.nowDomOrVideo=+o,config.Jump){case 1:o||(e=!0),t="å½“å‰æ–‡æ¡£ç±»å‹å·²è·³è¿‡";break;case 2:o&&(e=!0),t="å½“å‰è§†é¢‘/éŸ³é¢‘å·²è·³è¿‡"}if(e)config.unIndex++,Console(t);else{let e=!1,t=r.type,o="work"==t,i=null;o||(i=await $Script.getChildNodeInfo(r)),Console(`å½“å‰å°èŠ‚ ç±»å‹:[${getTypeName(t)}] åç§°:[${r.name}]`),config.close||($jumpThis.removeClass("loader"),o||i.works&&1!==i.works.Status?0!==(a=await SetProgress(i,r))&&1!==a?e=!0:1===a&&config.unIndex++:(e=!0,Console("æœ¬å°èŠ‚å·²å®Œæˆï¼")),e&&(CourseList[config.index[0]].module[s[0]].topic[s[1]].Nodes[s[2]].unNum=null,$(".view-3[data-un="+n+"]").addClass("isOk"),unNodeList.splice(config.unIndex,1),updataData()),$jumpThis.addClass("loader"),config.unIndex>=unNodeList.length&&(config.unIndex=0))}}if(config.close)return;Console("å½“å‰è¯¾ç¨‹å·²æˆåŠŸå®Œæˆ"),configInit(3),CourseList.splice(config.index[0],1),$couresWrap.children().eq(config.index[0]).remove(),config.index[0]>=CourseList.length&&(config.index[0]=0),updataData(),setTimeOut(()=>{0!=CourseList.length?(Console("å‡†å¤‡è¿›å…¥ä¸‹ä¸€ä¸ªè¯¾ç¨‹ã€‚ã€‚ã€‚"),getCourseLists()):(alert("æ‰€æœ‰è¯¾ç¨‹å‡å®Œæˆï¼Œæ„Ÿè°¢æ‚¨çš„ä½¿ç”¨ğŸ˜‰"),$("#hcq-content").remove())})}catch(e){setError(e)}}async function SetProgress(i,t){try{var o=null;switch(t.type){case"video":var n=await new Promise((t,o)=>{$.ajax({url:i.data.statusUrl,type:"get",dataType:"jsonp",jsonp:"jsonpcallback",success:function(e){t(e)},error:function(e){o(e)}})}),o=await _ajax($Script.url.setProgress,{cellId:t.id,learntime:getTime(n.args.duration),status:1},5e3);break;case"work":Console("å·²è·å–é¢˜ç›®,æ­£åœ¨è§£æç­”æ¡ˆä¸­...");var s=await _ajax("/study/Works/works",{courseId:CourseList[config.index[0]].id,assignmentId:t.id});let e=[];if(1==s.code)Console("è¯¥ç±»å‹ä½œä¸šä¸æ”¯æŒè‡ªåŠ¨å®Œæˆ,å·²è·³è¿‡");else{for(const c of s.paper.PaperQuestions)e.push({paperItemId:c.Id,answer:c.Answers.join("ï¼Œ")});Console("å½“å‰ä½œä¸šçŠ¶æ€:"+(o=await _ajax("/study/Works/answerOnlineWorks",{answerId:s.answer.Id,data:JSON.stringify(e)})).msg)}break;case"question":Console("å·²è·å–é¢˜ç›®,å¹¶å¼€å§‹è§£æ...");for(const l of i.data.paper.PaperQuestions){var r=l.Answers.join("ï¼Œ"),a=(Console(`é¢˜ç›®:[${l.Content}] ç­”æ¡ˆ:[${r}]`),await _ajax("/study/directory/answerpaper",{works:i.works.Id,paperItemId:l.Id,answer:r},1e3));1==a.code&&Console("å·²æäº¤é€‰é¡¹!")}Console("å½“å‰ä½œä¸šçŠ¶æ€:"+(o=await _ajax("/study/directory/subPaper",{studentWorksId:i.works.Id})).msg)}if(o&&o.msg&&/åˆ·è¯¾|ç¦/.test(o.msg)&&(Console("è´¦æˆ·ç–‘ä¼¼å¼‚å¸¸ï¼Œå·²ç»ˆæ­¢æ‰§è¡Œ"),$run.click()),config.close)return 0;o&&1==o.code&&Console("æœ¬å°èŠ‚å·²å®Œæˆï¼"),config.errorNum=0}catch(e){return config.close||(Console(`è·å–å¼‚å¸¸,è¿”å›[çŠ¶æ€ç :${e.status},é”™è¯¯ä¿¡æ¯${e.statusText}]`),config.errorNum++),3<config.errorNum?(Console("å½“å‰èŠ‚ç‚¹å¯èƒ½å¼‚å¸¸,æš‚æ—¶è·³è¿‡"),config.errorNum=0,1):0}}function getTypeName(e){switch(e){case"work":return"ä½œä¸š";case"question":return"ä¹ é¢˜";case"video":return"è§†é¢‘";case"audio":return"éŸ³é¢‘";case"image":return"å›¾ç‰‡";case"text":return"æ–‡æ¡£";default:return e}}function getTime(e){if("String"!==getType(e))return 10;e=e.split(":");return 60*+e[0]*60+60*+e[1]+ +e[2]}function closeInTime(){inTime&&(clearInterval(inTime),inTime=null,$countDown.parent().remove())}function setBg(e){localStorage.setItem("s_bg",e),$main.css("background-image","url("+e+")")}function configInit(t){config.errorNum=0;for(let e=1;e<=t;e++)config.index[e]=0}function getViewDom(){let e="";for(const t of CourseList[config.index[0]].module){e+=`
        <ul class="view-item" data-v=1>
            <li class="view-1 unfold">${t.name}</li>
            <div class="view-wrap">
        `;for(const o of t.topic){if(e+=`
            <ul class="view-item" data-v=2>
            <li class="view-2 unfold">${o.name}</li>
            <div class="view-wrap">
            <ul class="view-item" data-v=3>
            `,null!=o.Nodes)for(const i of o.Nodes)e+=`
                <li class="view-3 ${i.unNum?"":"isOk"}" data-un=${i.unNum} >
                <b>${getTypeName(i.type)}</b>
                <span>${i.name}</span>
                </li>`;e+="</ul></div></ul>"}e+="</div></ul>"}return e}function getCourseDom(e){let t="";for(const o of e)t+=`
        <div class="menu-box">
            <div>
                <div class="flex">${o.progress}</div>
                <img src="${o.cover}">
                <span class="text-ellipsis">${o.name}</span>
            </div>
        </div>`;return t}function userInit(){var e=localStorage.getItem("userName")+"_v.3";localStorage.getItem("scriptID")!==e?(localStorage.setItem("scriptID",e),Console("å¯¹è¿è¡Œç¯å¢ƒæ•°æ®åˆå§‹åŒ–ä¸­ã€‚ã€‚ã€‚"),localStorage.getItem("s_courseList")&&localStorage.removeItem("s_courseList"),config.isRead=!1,CourseList=[]):(CourseList=JSON.parse(localStorage.getItem("s_courseList"))||[],config.isRead=!0)}function setTimeOut(t){return new Promise(e=>{setTimeout(()=>{config.close||e(t())},1e3)})}function updataData(){config.isLoadFinish||localStorage.setItem("s_courseList",JSON.stringify(CourseList))}function setError(e){if(!1!==config.isPause)throw console.error("è„šæœ¬å·²æš‚åœè¿è¡Œ");Console(`è·å–å¼‚å¸¸,è¿”å›[çŠ¶æ€ç :${e.status},é”™è¯¯ä¿¡æ¯${e.statusText}]`),config.errorNum++,setTimeOut(()=>{3<config.errorNum?(Console("å¤±è´¥æ¬¡æ•°è¿‡å¤šï¼Œ1åˆ†é’Ÿåå°†å°è¯•é‡æ–°æ‰§è¡Œ"),Console("å¤±è´¥åŸå› å¯èƒ½ä¸º[ç™»å½•çŠ¶æ€å¤±æ•ˆï¼Œç½‘ç»œå¼‚å¸¸ï¼Œè´¦æˆ·ä¿¡æ¯å¼‚å¸¸]ï¼Œå»ºè®®åˆ·æ–°æœ¬é¡µé¢æˆåŠŸåå†é‡æ–°æ‰§è¡Œè¯¥è„šæœ¬"),clearTimeout(config.timeOut),config.timeOut=setTimeout(()=>{$run.attr("type","").click()},6e4)):(Console(`æ­£åœ¨å°è¯•é‡æ–°è·å–ç¬¬${config.errorNum}æ¬¡`),eval(config.pauseNode+"()"))})}function Console(e){--maxItemView<0&&(maxItemView=300,$consoleInfo.html(""));let t=$(`<span class="text-ellipsis ">${e}</span>`);$consoleInfo.append(t),t[0].scrollIntoView()}function _ajax(e,i,n){return new Promise((t,o)=>{!0===config.isPause?(o("å·²æš‚åœè¿è¡Œ"),config.timeOut=null):config.timeOut=setTimeout(()=>{!0===config.isPause?o("å·²æš‚åœè¿è¡Œ"):$.ajax({url:location.origin+e||"",type:!1===n?"GET":"POST",headers:{Authorization:AUTHORIZATION},data:i||{},dataType:"json",success:function(e){t(e)},error:function(e){o(e)}})},n||config.ajaxSpeed)})}function getStyle(){return`
#hcq-content {position: fixed;width: 90%;min-width: 320px;height: 96%;left: 0;top: 0;
    bottom: 0;right: 0;margin: auto;background: linear-gradient(to right, #6A82FB, #FC5C7D);
    border-radius: 10px;overflow: hidden;display: flex;box-shadow: 0 0 5px #666;z-index: 999}
#hcq-content-left,#hcq-content-right {position: relative;height: 100%;
    display: flex;flex-direction: column;transition: all .35s}
.user-name,.stuNum {background-color: rgba(255, 255, 255, .75)}
#hcq-content-left {width: 180px;box-shadow: 1px 0 6px #666;background: linear-gradient(to right, #6A82FB -250%, #fff 800%);
    left: 0;z-index: 9}
#hcq-content-right {width: 260px;right: 0;box-shadow: -1px 0 6px #666;
    background-color: rgba(255, 255, 255, 0.5);z-index: 9}
#hcq-content-left>img {width: 120px;height: 120px;background-color: rgba(255, 255, 255, 0.5);
    margin: 20px auto;border-radius: 5px;object-fit: cover}
.left-item {position: relative;margin: .5rem 0;text-align: center}
.left-item>span,.menu-item>span {display: block}
.text-ellipsis {padding: .5rem}
#hcq-main {position: relative;flex: 1;display: flex;justify-content: center;align-items: center;
    background-size: cover;background-position: center}
#hcq-main>div {position: absolute;display: none;flex-shrink: 0;width: 90%;height: 90%;
    border-radius: 5px;background-color: #fff}
#hcq-main>div.show {display: block;z-index: 2}
#hcq-main>div.flex.show {display: flex}
#hcq-main>#console-info {overflow: auto;background-color: rgba(255, 255, 255, .75);scroll-behavior: smooth}
.info-box>span {display: block;border-bottom: 1px dashed #2ECD71}
.coures-menu {position: relative;overflow: hidden;}
.coures-menu>.coures-wrap{overflow-y: auto;height: 100%;} 
#coures_switch{position:absolute;bottom:5px;right:5px;padding:6px 12px;border-radius:10px;
    background-color:rgb(150,167,252);font-size:14px;color:#fff;font-weight:600;cursor: pointer;}
    #coures_switch:active{transform: scaleX(.9)}
.coures-menu .menu-box {position: relative;display: flex;width: 20%;justify-content: center;float: left}
.menu-box>div {position: relative;width: 120px;height: 140px;flex-shrink: 0;margin: .5rem;
    border-radius: 5px;background-color: rgb(114, 93, 233);box-shadow: 0 0 5px #666;color: #fff}
.menu-box>div>div {position: absolute;width: 2rem;height: 2rem;border-radius: 50%;right: 0;background-color: #0aec6960}
.menu-box>div>img {width: 100%;height: 120px;border-radius: 5px;object-fit: cover;box-sizing:border-box;border: 1px solid #000}
.menu-box>div>span {display: block;padding: 0 !important;text-align: center;font-size: 12px}
#console-info::-webkit-scrollbar {width: 12px}
#console-info::-webkit-scrollbar:hover {background-color: rgba(0, 0, 0, 0.2)}
#console-info::-webkit-scrollbar-thumb {background-color: #6A82FB;border-radius: 5px}
.btn {position: relative;top: 140px;padding: .5rem;margin: 0 .5rem;border-radius: 5px;
    overflow: hidden;cursor: pointer;background-color: rgba(255, 255, 255, .8);box-shadow: 0 0 0 1em transparent;
    user-select: none;transition: all .25s;}
.btn[on=on] {animation: pulse 1s}
.btn>span {position: relative;z-index: 1}
.btn:hover {color: #fff !important;background-color: rgba(255, 255, 255, .2)}
.switch-platform {--color: #6A82FB;border: 1px solid #6A82FB;color: #6A82FB}
.switch-platform[show=on] {background-color: #6A82FB;color: #fff}
#hcq-content .mian-run {--color: #2ECD71;border: 1px solid #2ECD71;color: #2ECD71;}
#hcq-content .mian-run>span::before{content:"è¿è¡Œ"}
#hcq-content .mian-run[type=run] {--color: #ee5d5c;border: 1px solid#ee5d5c;color: #ee5d5c}
#hcq-content .mian-run[type=run]>span::before{content:"æš‚åœ"}
#hcq-content .mian-run::after,.switch-platform::after {content: "";position: absolute;top: 0;bottom: 0;left: 0;
    right: 0;width: 100%;height: 100%;transform: scaleX(0);z-index: -1;transition: transform .35s}
.switch-platform::after,#hcq-content .mian-run::after {background-color: var(--color)}
@keyframes pulse {from {box-shadow: 0 0 0 0 var(--color)}}
#hcq-content .mian-run:hover::after,.switch-platform:hover::after {transform: scaleX(1)}
.switch-box {position: absolute;z-index: -1;width: 180px;height: 100%;left: -180px;transition: all .35s;background-color: rgba(255, 255, 255, .8);box-shadow: 0 0 5px #666}
.switch-box.open {left: 180px;z-index: 9}
.switch-box>ul {list-style: none;padding: 0}
.switch-box li {cursor: pointer;text-align: center;margin: .2rem;padding: .5rem;border: #6A82FB 1px solid;transition: all .35s}
.switch-box li[on=on] {background-color: #6A82FB}
.left-btn,.right-btn {display: none;width: 1.5rem;height: 100%;align-items: center;
    background-color: rgb(0, 180, 0);color: #fff;cursor: pointer;user-select: none;justify-content: center;z-index: 9 !important}
.left-btn>span,.right-btn>span {display: block;font-size: 1.5rem;transition: all .35s}
.menu-item {text-align: center;font-weight: 600;font-size: 14px;margin: .5rem .2rem;margin-bottom: 0;box-shadow: 0 0 5px #666;background-color: rgba(0, 0, 0, 0.2)}
.menu-item>span {padding: .5rem 0}
.menu-item input[type=text] {width: 60px;margin: 0 .2rem;text-align: center}
.menu-item.flex {justify-content: unset;padding: .1rem 0}
.menu-item.flex>div.loader {pointer-events: none;background-color: rgba(0, 0, 0, .25)}
.menu-item.flex>div {width: 60px;height: 60px;border-radius: 5px;line-height: 60px;
    user-select: none;transition: all .35s;cursor: pointer;margin: .15rem 1.5px}
.menu-item.flex>div>a {display: block;text-decoration: none;olor: unset}
.menu-item.flex>div {pointer-events: all;background-color: rgba(255, 255, 255, .75)}
.menu-item.flex>.onck {transform: scale(.9);box-shadow: 0 0 5px #000}
.flex {display: flex;justify-content: space-around;align-items: center;flex-wrap: wrap}
ul {list-style: none;padding-left: 1.5rem}
#hcq-main>.coures-view {padding-right: 1rem;background-color: skyblue;overflow-y:auto}
.coures-view li {position: relative;margin: .15rem 0;padding: .15rem .25rem;border-radius: 2px;box-shadow: 0 0 2px #000;color: #fff;cursor: pointer}
.view-item>.view-wrap {display: none}
.coures-view li.unfold::after {content: "";position: absolute;transition: transform .35s;
    height: fit-content;top: 0;bottom: 0;margin: auto;right: .75em;border-left: .4em solid transparent;
    border-right: .4em solid transparent;border-bottom: .4em solid rgba(0, 0, 0, .35)}
.view-item.open>.view-wrap {display: block}
.view-item.open>li::after {transform: rotate(180deg)}
.view-item[data-type=1] {margin-bottom: 2rem;user-select: none}
.coures-view .view-1 {background-color: slateblue}
.coures-view .view-2 {background-color: #ee5d5c}
.coures-view .view-3 {font-size: 14px;font-weight: 600;margin: .5rem 0;background-color: #999}
.coures-view .view-3.isOk {background-color: #2ECD71}
.coures-view .view-3>b {background-color: skyblue;border-radius: 5px;padding: .15rem .25rem}
#changeBg {position: relative;flex-direction: column;justify-content: center}
#changeBg>b {position: absolute;top: 3rem;letter-spacing: 1px;color: #2a94eb}
.file-btn {display: block;margin: auto;margin-top: 3rem;padding: .35rem 1.65rem;
    border-radius: 2px;background-color: transparent;color: #2a94eb;border: 1px solid #2a94eb;cursor: pointer}
.file-btn>input {display: none}
.file-btn:active {transform: scale(.95)}
#goToGithub{font-weight: 600;color: red;font-size: 14px;padding: 0 4px;}
@media all and (max-width:1148px) {
    .right-btn {position: absolute;display: flex;margin-left: -1.5rem}
    #hcq-content-right>.right-btn>span {transform: rotate(0)}
    #hcq-content-right.open>.right-btn>span {transform: rotate(180deg)}
    #hcq-content-right.open {right: 0}
    #hcq-content-right {position: absolute;right: -260px}}
@media all and (max-width:1026px) {
    .coures-menu .menu-box {width: 25%}}
@media all and (max-width:846px) {
    .coures-menu .menu-box {width: 33.33%}}
@media all and (max-width:768px) {
    .left-btn {display: flex;position: absolute}
    #hcq-content-left {left: -180px}
    #hcq-content-left {position: absolute}
    #hcq-content-left.open {left: 0}
    #hcq-content-left+.left-btn>span {transform: rotate(0)}
    #hcq-content-left.open+.left-btn>span {transform: rotate(180deg)}
    .coures-menu .menu-box {width: 25%}}
@media all and (max-width:648px) {
    .coures-menu .menu-box {width: 33.33%}}
@media all and (max-width:480px) {
    #console-info {width: 100%;height: 90%;left: 0}
    .coures-menu .menu-box {width: 50%}}`}function getHtml(){return`
<div id="hcq-content">
<div id="hcq-content-left">
    <img src="http://q1.qlogo.cn/g?b=qq&nk=2533094475&s=640" alt="ç”¨æˆ·å¤´åƒ">
    <div class="left-item">
        <span>ç”¨æˆ·å</span>
        <span class="user-name text-ellipsis">åœæ­¢æ›´æ–°ä¸ç»´æŠ¤,éšç¼˜ä½¿ç”¨~</span>
    </div>
    <div class="left-item">
        <span>å­¦å·</span>
        <span class="stuNum text-ellipsis">ä¸èƒ½åˆ·ä½œä¸šå’Œè€ƒè¯•!!!</span>
    </div>
    <div class="left-item">
        <div class="switch-platform btn">
            <span>åˆ‡æ¢å¹³å°</span>
        </div>
    </div>
    <div class="left-item">
        <div class="mian-run btn">
            <span></span>
        </div>
    </div>
</div>
<div class="left-btn">
    <span>></span>
</div>
<div class="switch-box">
    <ul>
        <li data-type="0">èŒæ•™äº‘</li>
        <li data-type="1">æ™ºæ…§èŒæ•™</li>
        <li data-type="2">èŒæ•™äº‘èµ„æºåº“</li>
    </ul>
</div>
<div id="hcq-main">
    <div id="console-info" class="show">
        <div class="info-box"></div>
    </div>
    <div class="coures-item coures-menu">
        <span style="display: block;width: 100%;text-align: center;">è¯·åœ¨<time>15</time>ç§’å†…é€‰æ‹©è¯¾ç¨‹ï¼Œè¿‡æ—¶è‡ªåŠ¨é€‰æ‹©</span>
        <div class="coures-wrap"></div>
        <div id='coures_switch'>åˆ‡æ¢ä¸ºå·²å®Œæˆè¯¾ç¨‹</div>
    </div>
    <div class="coures-item" style="background-color: #666;color: #fff;overflow-y: auto;" id="supportBox">
        <br> <br>
        <center style="padding: 0 24px;">è„šæœ¬åˆ¶ä½œä¸æ˜“,å¦‚æœè¯¥è„šæœ¬å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œå¸Œæœ›å®¢å®˜èƒ½ä¸ºè¯¥é¡¹ç›®ç‚¹ä¸€ä¸ªå…è´¹çš„<a id="goToGithub" href="https://github.com/hsjzhcq/hcqHome">start</a>,ä½œè€…åœ¨æ­¤æ„Ÿæ¿€ä¸å°½ğŸ˜˜</center>
        <br> <br>
        <center>å¦‚æœèƒ½è¯·ä½œè€…å–ç“¶é¥®æ–™çš„è¯ï¼Œé‚£å°±æ›´å¼€å¿ƒäº†ğŸ˜</center>
        <br>
        <center>
            <img data-src="https://hcqhome.cn/wx.webp" width=240 alt="å¾®ä¿¡" title="å¾®ä¿¡æ”¶æ¬¾ç ">
            <img data-src="https://hcqhome.cn/zfb.webp" width=240 alt="æ”¯ä»˜å®" title="æ”¯ä»˜å®æ”¶æ¬¾ç ">
        </center>
    </div>
    <div class="coures-item flex" id="changeBg">
        <b>å¯é€‰æ‹©å›¾ç‰‡åœ¨çº¿é“¾æ¥æˆ–è€…æœ¬åœ°æ–‡ä»¶(æœ€å¤§2M)</b>
        <div class="form-group">
            <label>URL: <input type="text">
            <button>ç¡®å®š</button>
        </label>
        </div>
        <div class="form-group">
            <label class="file-btn">
                é€‰æ‹©æ–‡ä»¶
            <input type="file" accept="image/*">
        </label>
        </div>
    </div>
    <div class="coures-item coures-view"></div>
</div>
<div id="hcq-content-right">
    <div class="right-btn">
        <span>&#60</span>
    </div>
    <div class="menu-item">
        <span>è¯·æ±‚å‘é€é€Ÿåº¦</span>
        <div>
            [<input type="text" placeholder="1-4" data-default="3" id="ajax-set" value="3">ç§’ä¿®æ”¹ä¸€æ¬¡]
        </div>
    </div>
    <div class="menu-item">
        <span>æ–‡æ¡£ä¿®æ”¹é€Ÿåº¦</span>
        <div>
            [<input type="text" placeholder="1-4" data-default="2" id="dom-set" value="2">ç§’ä¿®æ”¹ä¸€æ¬¡]
        </div>
    </div>
    <div class="menu-item">
        <span>è§†é¢‘ä¿®æ”¹é€Ÿåº¦</span>
        <div>
            [<input type="text" placeholder="8-15" data-default="10" id="video-set" value="10">ç§’ä¿®æ”¹ä¸€æ¬¡]
        </div>
    </div>
    <div class="menu-item">
        <span>è§†é¢‘ä¿®æ”¹æ—¶é—´</span>
        <div>
            [è§†é¢‘å½“å‰è¿›åº¦+<input type="text" id="video-time-set" data-default="15" placeholder="12-22" value="15">ç§’]
        </div>
    </div>
    <div class="menu-item">
        <span style="color:red;">ä¿®æ”¹é€Ÿåº¦è¿‡å¿«å¯èƒ½å¯¼è‡´è¢«æ£€æµ‹è€Œå¼‚å¸¸</span>
        <span style="color:red;">å·²é™å®šä¿®æ”¹èŒƒå›´ï¼Œè¯·é…Œæƒ…ä¿®æ”¹</span>
    </div>
    <div class="menu-item">
        <span id="clear-info" style="cursor: pointer">ç‚¹æˆ‘æ¸…é™¤é¡µé¢ä¿¡æ¯</span>
    </div>
    <div class="menu-item flex" id="menubar">
        <div class="loader" data-type="change">æ›´æ¢è¯¾ç¨‹</div>
        <div class="loader" data-type="jump-dom">è·³è¿‡æ–‡æ¡£</div>
        <div class="loader" data-type="jump-video">è·³è¿‡è§†é¢‘</div>
        <div class="loader" data-type="jump-this">è·³è¿‡æœ¬èŠ‚</div>
        <div class="loader" data-type="view">æ‰“å¼€è§†å›¾</div>
        <div data-type="feedback">
            <a target="_blank" href="https://b23.tv/m82Rg1D">åé¦ˆæ„è§</a>
        </div>
        <div data-type="support">æ”¯æŒä½œè€…</div>
        <div data-type="changeBg">æ›´æ¢èƒŒæ™¯</div>
        <div data-type="clearCache">æ¸…é™¤ç¼“å­˜</div>
    </div>
</div>
</div>`}$l_btn.click(function(){$c_left.toggleClass("open")}),$r_btn.click(function(){$c_right.toggleClass("open")}),$s_btn.click(function(){$sw_box.toggleClass("open")}),$sw_box.on("click","li",function(){null==$(this).attr("on")&&confirm(`æ˜¯å¦åˆ‡æ¢åˆ°${$(this).text()}å¹³å°`)&&(window.location.href=""+typeHome[$(this).data("type")])}),$("#clear-info").click(function(){$consoleInfo.html("")}),$couresMenu.on("click",".menu-box",function(){closeInTime();let e=!0;var t;$ch_btn.is(".onck")&&$ch_btn.click(),null==$(this).attr("now")?($(this).attr("now","").siblings("div[now]").removeAttr("now"),t=+$(this).index(),config.index=[t,0,0],unNodeList=[],config.isPause=config.close=!0,setTimeout(()=>{config.isPause=config.close=!1,getCourseLists()},config.ajaxSpeed+1e3)):e=!1,"run"!=$run.attr("type")&&(e?(Console("å·²å¯åŠ¨è„šæœ¬è¿è¡Œ"),$run.attr("type","run")):$run.click())}),$couresSwitch.click(function(){var e=config["isLoadFinish"];if(confirm("æ˜¯å¦åˆ‡æ¢ä¸º"+(e?"å·²":"æœª")+"è¯¾ç¨‹?")){if(0===finishList.length)return alert("åˆ‡æ¢å¤±è´¥,å½“å‰æ²¡æœ‰æœªå®Œæˆè¯¾ç¨‹!");config.isLoadFinish=!e,"run"==$run.attr("type")&&$run.click(),config.pauseNode=null,configInit(3),config.errorNum=config.unIndex=0,CourseList=e?($(this).text("åˆ‡æ¢ä¸ºå·²å®Œæˆè¯¾ç¨‹"),JSON.parse(localStorage.getItem("s_courseList"))||[]):($(this).text("åˆ‡æ¢ä¸ºæœªå®Œæˆè¯¾ç¨‹"),finishList),$couresWrap.html(getCourseDom(CourseList))}}),$couresView.on("click","li",function(){$(this).is(".unfold")?$(this).parent().toggleClass("open"):($v_btn.is(".onck")&&$v_btn.click(),$(this).is(".isOk")?Console("å½“å‰å­èŠ‚ç‚¹å·²å®Œæˆï¼Œæ— éœ€æ‰§è¡Œ"):(config.isPause&&Console("è¯·å…ˆè¿è¡Œè„šæœ¬!"),config.unIndex=unNodeList.indexOf($(this).data("un")),clearTimeout(config.timeOut),getChildNodeInfo()))}),$run.click(function(){if(config._Lock)return Console("è¯·ç­‰å¾…æ•°æ®æŸ¥è¯¢åæ‰§è¡Œ!");"run"!=$(this).attr("type")?($(this).attr("type","run"),config.isPause=config.close=!1,config.pauseNode?(Console("å·²å¯åŠ¨è„šæœ¬è¿è¡Œ"),eval(config.pauseNode+"()")):finishList.length&&config.isLoadFinish?getModuleLists():(Console("è·å–è¯¾ç¨‹ä¿¡æ¯ä¸­..."),getCourseLists())):(closeInTime(),$(this).removeAttr("type"),config.isPause=config.close=!0,null!=config.timeOut&&(clearTimeout(config.timeOut),config.timeOut=null),Console("å·²æš‚åœè„šæœ¬è¿è¡Œ"))}),$speedSet.blur(function(){let e=$(this).val().replace(/\s*/g,""),t=$(this).attr("placeholder"),o=/^(?<min>\d*)-(?<max>\d*)/.exec(t),i=+o.groups.min,n=+o.groups.max,s=+$(this).data("default"),r=$(this).attr("id");switch(""!=e&&"number"==typeof(e=+e)&&i<=e&&e<=n&&(s=e),r){case"ajax-set":config.speed=1e3*s,Console(`è¯·æ±‚å‘é€é€Ÿåº¦ä¿®æ”¹æˆåŠŸ,å½“å‰é€Ÿåº¦${s}s`);break;case"dom-set":config.domRequestSpeed=1e3*s,Console(`æ–‡æ¡£ä¿®æ”¹é€Ÿåº¦ä¿®æ”¹æˆåŠŸ,å½“å‰é€Ÿåº¦${s}s`);break;case"video-set":config.videoRequestSpeed=1e3*s,Console(`è§†é¢‘ä¿®æ”¹é€Ÿåº¦ä¿®æ”¹æˆåŠŸ,å½“å‰é€Ÿåº¦${s}s,ä¸‹ä¸€ä¸ªè§†é¢‘åç”Ÿæ•ˆ`);break;case"video-time-set":Console(`è§†é¢‘å¢åŠ ä¿®æ”¹æˆåŠŸ,å½“å‰é€Ÿåº¦${config.videoAddSpeed=s}s,ä¸‹ä¸€ä¸ªè§†é¢‘åç”Ÿæ•ˆ`);break;default:Console("é€Ÿåº¦ä¿®æ”¹å¤±è´¥")}$(this).val(s)}),$changeBg.on("click","button",function(){setBg($(this).prev().val()),$c_btn.is(".onck")&&$c_btn.click()}).find("input[type=file]").change(function(){if(this.files[0].size<=2097152){let e=new FileReader;e.readAsDataURL(this.files[0]),e.onload=function(e){setBg(e.target.result)}}else Console("å½“å‰æœ¬åœ°å›¾ç‰‡å¤§äº2Mï¼Œæ— æ³•æ·»åŠ ");$c_btn.is(".onck")&&$c_btn.click()}),$menubar.on("click","div",function(){var o,n=$(this).data("type");if(!$(this).is(".loader")){let e=!1,t=!0,i=null;switch(n){case"feedback":t=!1;break;case"support":if(e=!0,t=!1,!(i=$supportBox).attr("load")){i.attr("load","load");let t=i.find("img"),o=t["length"];for(;o--;){let e=t.eq(o);e.attr("src",e.data("src"))}}break;case"change":e=!0,i=$couresMenu;break;case"view":e=!0,i=$couresView;break;case"changeBg":e=!0,i=$changeBg;break;case"jump-dom":if(config.close)return Console("è¿è¡Œè„šæœ¬åå†ä½¿ç”¨");$(this).is(".onck")?(Console("å·²å…³é—­è·³è¿‡æ–‡æ¡£æ¨¡å¼"),config.Jump=0):(o="",Console("å·²å¼€å¯è·³è¿‡æ–‡æ¡£æ¨¡å¼"+(o=2===config.Jump?",å¹¶å…³é—­è·³è¿‡è§†é¢‘":o)),config.Jump=1,$jumpVideo.removeClass("onck"),0===config.nowDomOrVideo&&$jumpThis.click());break;case"jump-video":if(config.close)return Console("è¿è¡Œè„šæœ¬åå†ä½¿ç”¨");$(this).is(".onck")?(Console("å·²å…³é—­è·³è¿‡è§†é¢‘æ¨¡å¼"),config.Jump=0):(o="",Console("å·²å¼€å¯è·³è¿‡è§†é¢‘æ¨¡å¼"+(o=1===config.Jump?",å¹¶å…³é—­è·³è¿‡æ–‡æ¡£":o)),config.Jump=2,$jumpDom.removeClass("onck"),1===config.nowDomOrVideo&&$jumpThis.click());break;case"jump-this":if(config.close)return Console("è¿è¡Œè„šæœ¬åå†ä½¿ç”¨");t=!1,config.unIndex++,config.nowDomOrVideo=-1,$(this).addClass("loader"),Console("å·²è·³è¿‡å½“å‰å­èŠ‚ç‚¹"),clearTimeout(config.timeOut),getChildNodeInfo();break;case"clearCache":t=!1,confirm("æ˜¯å¦æ¸…ç©ºç¼“å­˜?(å¦‚æœ‰å¼‚å¸¸æ—¶ä½¿ç”¨)")&&(localStorage.setItem("scriptID","clearCache"),alert("æ¸…é™¤æˆåŠŸ,é¡µé¢åˆ·æ–°åè¯·é‡æ–°æ‰§è¡Œè„šæœ¬"),setTimeout(()=>{location.reload()},5e3))}e&&i.toggleClass("show").siblings(".coures-item.show").removeClass("show"),t&&$(this).toggleClass("onck")}}),window.onresize=function(){window.matchMedia("(max-width:1148px)").matches&&$c_right.is(".open")&&$r_btn.click(),window.matchMedia("(max-width:768px)").matches&&($sw_box.is(".open")&&$s_btn.click(),$c_left.is(".open")&&$l_btn.click())}})();
